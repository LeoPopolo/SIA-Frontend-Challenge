<main class="Cart">
  <section class="Cart__content">
    <h1 class="Cart__content__title">Carrito</h1>

    <section class="Cart__content__items">
      @if (loading()) {
        <ngx-skeleton-loader
          count="6"
          [theme]="{
            'border-radius': '20px',
            'width': '100%',
            'height': '100px'
          }">
        </ngx-skeleton-loader>
      } @else {
        @if (cart().length) {
          @for (item of cart(); track $index) {
            <app-cart-item [product]="item" (onAction)="handleCartItemAction($event)"/>
          }
        } @else {
          <p class="Cart__content__items__empty">No hay productos en el carrito</p>
        }
      }
    </section>

    @if (cart().length) {
      <footer class="Cart__content__footer">
        <p class="Cart__content__footer__label">Total: ${{ cartTotal$ | async }}</p>

        @if (loadingSend()) {
          <mat-progress-spinner [diameter]="50" mode="indeterminate"></mat-progress-spinner>
        }

        <app-gradient-button (click)="finishPurchase()">Finalizar pedido <mat-icon>arrow_right_alt</mat-icon></app-gradient-button>
      </footer>
    }
  </section>
</main>
